{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\glgre\\\\Documents\\\\School\\\\CS\\\\CSCI3341\\\\webApp\\\\ClassRater\\\\client\\\\src\\\\components\\\\FlagButton.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FlagButton = _ref => {\n  _s();\n\n  let {\n    post_id,\n    type\n  } = _ref;\n  const [user, setUser] = useState([]);\n  const [flag, setFlag] = useState([]);\n  const [isFlag, setIsFlag] = useState(false);\n\n  const getUserInfo = async () => {\n    try {\n      const respone = await fetch(\"http://localhost:5000/dashboard\", {\n        method: \"GET\",\n        headers: {\n          token: localStorage.token\n        }\n      });\n      const userData = await respone.json();\n      setUser(userData);\n      const fetchFlag = await fetch(`http://localhost:5000/flags/${post_id}/${userData.user_id}`, {\n        method: \"GET\"\n      });\n\n      try {\n        const flagInfo = await fetchFlag.json();\n        setFlag(flagInfo);\n        setIsFlag(true);\n      } catch (err2) {\n        console.log(\"no flag\");\n        setIsFlag(false);\n      }\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const makeFlag = async () => {\n    try {\n      const newFlag = await fetch(\"http://localhost:5000/flags\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          \"user_id\": user.user_id,\n          \"post_id\": post_id,\n          \"post_type\": type\n        })\n      });\n      const flagInfo = newFlag.json();\n      setFlag(flagInfo);\n      setIsFlag(true);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const unflag = async () => {\n    try {\n      const deleteFlag = await fetch(`http://localhost:5000/flags/${flag.flag_id}`, {\n        method: \"DELETE\"\n      });\n      setFlag([]);\n      setIsFlag(false);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  useEffect(() => {\n    getUserInfo();\n  }, [isFlag]);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: !isFlag ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: makeFlag,\n      children: \"Flag\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: unflag,\n      children: \"Flagged\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FlagButton, \"KD+w28QqA+a2oHbE1Hz5D9X+rlU=\");\n\n_c = FlagButton;\nexport default FlagButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"FlagButton\");","map":{"version":3,"sources":["C:/Users/glgre/Documents/School/CS/CSCI3341/webApp/ClassRater/client/src/components/FlagButton.js"],"names":["React","Fragment","useState","useEffect","FlagButton","post_id","type","user","setUser","flag","setFlag","isFlag","setIsFlag","getUserInfo","respone","fetch","method","headers","token","localStorage","userData","json","fetchFlag","user_id","flagInfo","err2","console","log","err","error","message","makeFlag","newFlag","body","JSON","stringify","unflag","deleteFlag","flag_id"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\r\n\r\nconst FlagButton = ( {post_id, type} ) => {\r\n    const [user, setUser] = useState([]);\r\n    const [flag, setFlag] = useState([]);\r\n    const [isFlag, setIsFlag] =useState(false);\r\n\r\n    const getUserInfo = async() => {\r\n        try {\r\n            const respone = await fetch(\"http://localhost:5000/dashboard\", {\r\n                method: \"GET\",\r\n                headers: {token : localStorage.token}\r\n            });\r\n            const userData = await respone.json();\r\n            \r\n            setUser(userData);\r\n\r\n            const fetchFlag = await fetch(`http://localhost:5000/flags/${post_id}/${userData.user_id}`, {\r\n                method: \"GET\"\r\n            });\r\n            try {\r\n                const flagInfo = await fetchFlag.json();\r\n                setFlag(flagInfo);\r\n                setIsFlag(true);\r\n            } catch (err2) {\r\n                console.log(\"no flag\");\r\n                setIsFlag(false);\r\n            }\r\n        } catch (err) {\r\n            console.error(err.message);\r\n        }\r\n    }\r\n\r\n    const makeFlag = async() => {\r\n        try {\r\n            const newFlag = await fetch(\"http://localhost:5000/flags\", {\r\n                method: \"POST\",\r\n                headers: {\"Content-Type\":\"application/json\"},\r\n                body: JSON.stringify({\"user_id\": user.user_id, \"post_id\": post_id, \"post_type\": type})\r\n            });\r\n\r\n            const flagInfo = newFlag.json();\r\n            setFlag(flagInfo);\r\n            setIsFlag(true);\r\n        } catch (err) {\r\n            console.error(err.message);\r\n        }\r\n    }\r\n\r\n    const unflag = async() => {\r\n        try {\r\n            const deleteFlag = await fetch(`http://localhost:5000/flags/${flag.flag_id}`, {\r\n                method: \"DELETE\"\r\n            });\r\n\r\n            setFlag([]);\r\n            setIsFlag(false);\r\n        } catch (err) {\r\n            console.error(err.message);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getUserInfo();\r\n    }, [isFlag]);\r\n    \r\n    return (\r\n        <Fragment>\r\n            { !isFlag ? \r\n                <button onClick={makeFlag}>Flag</button> \r\n                :\r\n                <button onClick={unflag}>Flagged</button> }\r\n        </ Fragment>\r\n    );\r\n}\r\n\r\nexport default FlagButton;"]},"metadata":{},"sourceType":"module"}